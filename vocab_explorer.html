<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>High Valyrian â€” Vocab Explorer</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0a0a0f;
      --surface: #12121a;
      --surface2: #1a1a27;
      --surface3: #222233;
      --border: #2a2a3e;
      --text: #e4e4ef;
      --text-dim: #8888a0;
      --accent: #7c5bf5;
      --accent-glow: rgba(124, 91, 245, 0.25);
      --accent2: #f59e0b;
      --accent3: #10b981;
      --special: #ef4444;
      --punct: #3b82f6;
      --radius: 12px;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* --- Background effect --- */
    body::before {
      content: '';
      position: fixed;
      top: -50%; left: -50%;
      width: 200%; height: 200%;
      background: radial-gradient(ellipse at 30% 20%, rgba(124, 91, 245, 0.06) 0%, transparent 50%),
                  radial-gradient(ellipse at 70% 80%, rgba(245, 158, 11, 0.04) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1.5rem;
      position: relative;
      z-index: 1;
    }

    /* --- Header --- */
    header {
      text-align: center;
      margin-bottom: 3rem;
    }

    header .badge {
      display: inline-block;
      background: linear-gradient(135deg, var(--accent), #a78bfa);
      color: #fff;
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 2px;
      text-transform: uppercase;
      padding: 0.35rem 1rem;
      border-radius: 999px;
      margin-bottom: 1rem;
    }

    header h1 {
      font-size: 2.8rem;
      font-weight: 800;
      background: linear-gradient(135deg, #e4e4ef 0%, #a78bfa 50%, #7c5bf5 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1.1;
      margin-bottom: 0.5rem;
    }

    header p {
      color: var(--text-dim);
      font-size: 1.05rem;
      max-width: 600px;
      margin: 0 auto;
    }

    /* --- Stats bar --- */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 1rem;
      margin-bottom: 2.5rem;
    }

    .stat-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.25rem;
      text-align: center;
      transition: transform 0.2s, border-color 0.2s;
    }

    .stat-card:hover {
      transform: translateY(-2px);
      border-color: var(--accent);
    }

    .stat-card .stat-value {
      font-size: 2rem;
      font-weight: 800;
      font-family: 'JetBrains Mono', monospace;
      background: linear-gradient(135deg, var(--accent), #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .stat-card .stat-label {
      font-size: 0.8rem;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 0.25rem;
    }

    /* --- Section titles --- */
    .section-title {
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .section-title .icon { font-size: 1.2rem; }

    /* --- Search & Filter --- */
    .controls {
      display: flex;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }

    .search-box {
      flex: 1;
      min-width: 200px;
      position: relative;
    }

    .search-box input {
      width: 100%;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 0.75rem 1rem 0.75rem 2.75rem;
      color: var(--text);
      font-family: 'Inter', sans-serif;
      font-size: 0.95rem;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .search-box input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-glow);
    }

    .search-box::before {
      content: 'ğŸ”';
      position: absolute;
      left: 0.9rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1rem;
      pointer-events: none;
    }

    .filter-btns {
      display: flex;
      gap: 0.4rem;
    }

    .filter-btn {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 0.6rem 1rem;
      color: var(--text-dim);
      font-family: 'Inter', sans-serif;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .filter-btn:hover { border-color: var(--accent); color: var(--text); }
    .filter-btn.active { background: var(--accent); border-color: var(--accent); color: #fff; }

    /* --- Sort --- */
    .sort-controls {
      display: flex;
      gap: 0.4rem;
      align-items: center;
    }

    .sort-label {
      font-size: 0.8rem;
      color: var(--text-dim);
      margin-right: 0.25rem;
    }

    /* --- Token grid --- */
    .token-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 0.6rem;
      margin-bottom: 3rem;
    }

    .token-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
      overflow: hidden;
    }

    .token-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 3px;
      height: 100%;
      border-radius: 10px 0 0 10px;
    }

    .token-card.type-special::before { background: var(--special); }
    .token-card.type-punct::before { background: var(--punct); }
    .token-card.type-word::before { background: var(--accent3); }

    .token-card:hover {
      border-color: var(--accent);
      transform: translateY(-1px);
      box-shadow: 0 4px 20px rgba(124, 91, 245, 0.12);
    }

    .token-card .token-text {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--text);
      word-break: break-all;
      margin-bottom: 0.4rem;
    }

    .token-card.type-special .token-text { color: var(--special); }
    .token-card.type-punct .token-text { color: var(--punct); }

    .token-card .token-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .token-card .token-id {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.72rem;
      color: var(--accent);
      background: var(--accent-glow);
      padding: 0.15rem 0.5rem;
      border-radius: 999px;
      font-weight: 600;
    }

    .token-card .token-freq {
      font-size: 0.72rem;
      color: var(--text-dim);
    }

    /* --- Freq bar --- */
    .freq-bar-container {
      margin-top: 0.5rem;
      height: 3px;
      background: var(--surface3);
      border-radius: 999px;
      overflow: hidden;
    }

    .freq-bar {
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--accent), #a78bfa);
      transition: width 0.4s ease;
    }

    /* --- Top tokens chart --- */
    .chart-section {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.5rem;
      margin-bottom: 2.5rem;
    }

    .bar-chart {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .bar-row {
      display: grid;
      grid-template-columns: 120px 1fr 60px;
      gap: 0.75rem;
      align-items: center;
    }

    .bar-row .bar-token {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      font-weight: 500;
      text-align: right;
      color: var(--text);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .bar-row .bar-track {
      height: 24px;
      background: var(--surface3);
      border-radius: 6px;
      overflow: hidden;
    }

    .bar-row .bar-fill {
      height: 100%;
      border-radius: 6px;
      background: linear-gradient(90deg, var(--accent) 0%, #a78bfa 100%);
      transition: width 0.6s cubic-bezier(0.22, 1, 0.36, 1);
      min-width: 2px;
    }

    .bar-row .bar-count {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.78rem;
      color: var(--text-dim);
      text-align: right;
    }

    /* --- Detail modal --- */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(4px);
      z-index: 100;
      justify-content: center;
      align-items: center;
    }

    .modal-overlay.active { display: flex; }

    .modal {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 2rem;
      max-width: 420px;
      width: 90%;
      text-align: center;
      animation: modalIn 0.25s ease;
    }

    @keyframes modalIn {
      from { opacity: 0; transform: scale(0.92) translateY(10px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }

    .modal .modal-token {
      font-family: 'JetBrains Mono', monospace;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .modal .modal-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
      margin: 1.25rem 0;
    }

    .modal .detail-item {
      background: var(--surface2);
      border-radius: 10px;
      padding: 0.75rem;
    }

    .modal .detail-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--accent);
    }

    .modal .detail-label {
      font-size: 0.7rem;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .modal .close-btn {
      background: var(--surface3);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 0.6rem 1.5rem;
      color: var(--text);
      font-family: 'Inter', sans-serif;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .modal .close-btn:hover { background: var(--accent); border-color: var(--accent); }

    /* --- Footer --- */
    footer {
      text-align: center;
      color: var(--text-dim);
      font-size: 0.78rem;
      padding: 2rem 0;
      border-top: 1px solid var(--border);
    }

    footer a { color: var(--accent); text-decoration: none; }
    footer a:hover { text-decoration: underline; }

    /* --- Responsive --- */
    @media (max-width: 640px) {
      header h1 { font-size: 1.8rem; }
      .stats-grid { grid-template-columns: repeat(2, 1fr); }
      .token-grid { grid-template-columns: repeat(2, 1fr); }
      .bar-row { grid-template-columns: 80px 1fr 50px; }
      .controls { flex-direction: column; }
    }

    /* --- No results --- */
    .no-results {
      text-align: center;
      padding: 3rem;
      color: var(--text-dim);
      font-size: 1.1rem;
      grid-column: 1 / -1;
    }

    /* --- Scroll animation --- */
    .token-card {
      opacity: 0;
      animation: fadeUp 0.3s ease forwards;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="badge">NLP Week 3 â€” Pradita University</div>
      <h1>High Valyrian Vocab Explorer</h1>
      <p>Interactive vocabulary & token ID mapping visualization â€” 299 tokens from a custom tokenizer pipeline</p>
    </header>

    <div class="stats-grid" id="stats-grid"></div>

    <div class="chart-section">
      <h2 class="section-title"><span class="icon">ğŸ“Š</span> Top 15 Most Frequent Tokens</h2>
      <div class="bar-chart" id="bar-chart"></div>
    </div>

    <h2 class="section-title"><span class="icon">ğŸ—‚ï¸</span> Full Vocabulary</h2>

    <div class="controls">
      <div class="search-box">
        <input type="text" id="search" placeholder="Search tokens..." autocomplete="off">
      </div>
      <div class="filter-btns">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="word">Words</button>
        <button class="filter-btn" data-filter="special">Special</button>
        <button class="filter-btn" data-filter="punct">Punct</button>
      </div>
      <div class="sort-controls">
        <span class="sort-label">Sort:</span>
        <button class="filter-btn active" data-sort="freq">Freq â†“</button>
        <button class="filter-btn" data-sort="alpha">Aâ†’Z</button>
        <button class="filter-btn" data-sort="id">ID â†‘</button>
      </div>
    </div>

    <div class="token-grid" id="token-grid"></div>

    <footer>
      Corpus: <a href="https://www.kaggle.com/datasets/viceriomarinowski/high-valyrian-corpus-from-game-of-thrones?resource=download" target="_blank">High Valyrian Corpus â€” Kaggle</a> Â· Built for NLP Assignment
    </footer>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="modal"></div>
  </div>

  <script>
    // ============================================================
    // DATA â€” embedded from vocab.json + frequency data from tokenizer
    // ============================================================
    const VOCAB_DATA = {"<PAD>": 0, "<UNK>": 1, "<BOS>": 2, "<EOS>": 3, "se": 4, ".": 5, "jemo": 6, ",": 7, "zaldrÄ«zoti": 8, "henujagon": 9, "issa": 10, "Ådrikagon": 11, "issi": 12, "skoros": 13, "perzys": 14, "dÄrys": 15, "Ä“lÄ«": 16, "Å«ndanissis": 17, "gaomagon": 18, "hÄ“drÈ³": 19, "syt": 20, "jemÄ“le": 21, "jorrÄelagon": 22, "jaelar": 23, "hen": 24, "hÅ«lon": 25, "hÄ“nkirÄ«": 26, "belmon": 27, "drÄ“jotas": 28, "dÄervosas": 29, "zaldrÄ«zir": 30, "kostilus": 31, "ziry": 32, "jaelon": 33, "dÄervon": 34, "iderÄ“bza": 35, "sytilus": 36, "dÄeri": 37, "kostos": 38, "pryjari": 39, "ivestragÄ«": 40, "jorrÄelis": 41, "jagon": 42, "skoriot": 43, "vÄ“jose": 44, "jaelagon": 45, "gaomis": 46, "glaes": 47, "drÄ“joti": 48, "kirimvose": 49, "dÄeris": 50, "dÄeriot": 51, "vÄ“zos": 52, "pÅnta": 53, "qilÅni": 54, "jÄ“dagon": 55, "pÅntalo": 56, "jÄ“dÄs": 57, "avy": 58, "?": 59, "zÅ«gagon": 60, "Äeksio": 61, "drÄ“jagon": 62, "Ä«lva": 63, "ÅÃ±o": 64, "targaryen": 65, "hÄ“nta": 66, "glÄ“drÄ«": 67, "ryndÄro": 68, "belma": 69, "daenarÄ«": 70, "dÅre": 71, "jaela": 72, "pryvella": 73, "tepagon": 74, "Ã¦lÄ«rys": 75, "hÄ“nkus": 76, "sÄ«r": 77, "mÄ“rÄ«": 78, "zaldrÄ«zi": 79, "mÄ“re": 80, "morghÅ«ljagon": 81, "symbe": 82, "jÄ“dar": 83, "morghot": 84, "jevorion": 85, "muÃ±a": 86, "pyghor": 87, "Äbrar": 88, "gÅ«rotrirÄ«": 89, "jÄ“drivÄ«bilÄtÄs": 90, "rÅ«jagon": 91, "brÅzma": 92, "jevilÄtÄs": 93, "kirimvi": 94, "kostas": 95, "ossÄ“nagon": 96, "dÄria": 97, "dÄrÄ«": 98, "glaeson": 99, "gÅ«rÄ“bzi": 100, "jaelza": 101, "jemÄ“bza": 102, "Äegon": 103, "belmurti": 104, "ondor": 105, "sÄ«rivalis": 106, "valyria": 107, "È³dragon": 108, "iderÄ“bzi": 109, "jaelzar": 110, "lÄ“kia": 111, "qogror": 112, "tÄ«kila": 113, "arlÅ«ni": 114, "daenerys": 115, "dÄerÄ“bzi": 116, "dÄrilaros": 117, "hÄ“nkirzÄ«r": 118, "jikÄs": 119, "jÄhon": 120, "jÄ“nagon": 121, "jÅfari": 122, "mÄzis": 123, "zaldrÄ«zÄ«r": 124, "azantys": 125, "kessa": 126, "kesÄ«r": 127, "kesÄ«ri": 128, "muÃ±agon": 129, "onosor": 130, "vali": 131, "Ã±uhares": 132, "Ä«lÅnagon": 133, "alaric": 134, "aÅhaerys": 135, "daoruni": 136, "dÄeruni": 137, "hae": 138, "jevi": 139, "kesan": 140, "kostÅha": 141, "pÄr": 142, "rÅ«sÄ«": 143, "syrzir": 144, "tolÄ«": 145, "Äeksi": 146, "Änogar": 147, "Ä“lÄ«rÄ«": 148, "Ä“rinis": 149, "Ä“za": 150, "aegon": 151, "andahli": 152, "arlÄ«": 153, "aÅt": 154, "daor": 155, "dÄerys": 156, "dÅron": 157, "glaesagon": 158, "glÈ³rzi": 159, "gÄ“lÄ«": 160, "iderenna": 161, "ivestragon": 162, "iÄ": 163, "jevon": 164, "kesor": 165, "kesy": 166, "mÄzÄ«lÄtÄs": 167, "onogÄr": 168, "rhaella": 169, "rijÄ": 170, "tolvÄ«": 171, "zaldrÄ«zotas": 172, "zyhys": 173, "Ã¦eksio": 174, "Ã±uho": 175, "Äerys": 176, "Ä“ngos": 177, "ÅÃ±osor": 178, "aÅhaeot": 179, "belmurtÄs": 180, "belmurtÄ«": 181, "dÄeragon": 182, "gadis": 183, "hÅ«nagon": 184, "jiorvÄr": 185, "jorun": 186, "jorÅ«dan": 187, "jorÅ«n": 188, "jÅragor": 189, "kastÄs": 190, "kostigon": 191, "mirre": 192, "morghÅ«lis": 193, "nykeles": 194, "onos": 195, "qilÅn": 196, "rijÄ“la": 197, "rÅ«zÄ«non": 198, "sagon": 199, "sorzi": 200, "teptas": 201, "toli": 202, "vestretÄs": 203, "ynoma": 204, "zÈ³haan": 205, "Ã±uhe": 206, "aeksio": 207, "aerys": 208, "ajomÄri": 209, "ao": 210, "avytilzÈ³n": 211, "azantyr": 212, "aÅhikagon": 213, "belmagon": 214, "belmÄzma": 215, "brÅza": 216, "bÄ“lÄ«bza": 217, "daorys": 218, "drÄ“jÄ«n": 219, "dÄerves": 220, "eldoria": 221, "emagon": 222, "essos": 223, "gadÄ«li": 224, "gadÄ«lÄ«": 225, "ghiscÄ«": 226, "gÅvilirose": 227, "gÅ«rotriri": 228, "gÅ«rÄ“nna": 229, "gÅ«rÄ“Ã±agon": 230, "henogon": 231, "hero": 232, "hÄedar": 233, "hÅ«bÄ“ntas": 234, "hÅ«bÄ“nti": 235, "hÅ«ro": 236, "idaÃ±e": 237, "iderÄ“bÄzma": 238, "iksan": 239, "ivestrilÄtÄs": 240, "ivestrÄ«": 241, "jelmÅt": 242, "jeme": 243, "jinÄ“bagon": 244, "jiÅrina": 245, "jÄhor": 246, "jÄkÄ“lot": 247, "jÄ“da": 248, "jÅ«nÄs": 249, "kelÄ«tÄ«s": 250, "kepa": 251, "kesÄ«rÄ«": 252, "kivaroti": 253, "kostagon": 254, "lentrot": 255, "luaan": 256, "lÄ«rÄ«": 257, "mazÄ«lzi": 258, "mellyni": 259, "morghÅ«lagon": 260, "muÃ±o": 261, "nykÄ“lo": 262, "ondorion": 263, "pryjÄtÄs": 264, "prÅ«mia": 265, "pÅjor": 266, "pÅjÄzÄ«r": 267, "pÅntÄs": 268, "rijÄnagon": 269, "rijÄ«bi": 270, "rÄ“bagon": 271, "rÅ«dholÄ«": 272, "rÅ«sa": 273, "sÄ“nagon": 274, "sÄ«rys": 275, "targÄrio": 276, "tepan": 277, "tolvÄ«r": 278, "valyrÄ«ha": 279, "valzÄr": 280, "vaoreznon": 281, "vestris": 282, "zaldrÄ«": 283, "zentyssis": 284, "zentyssyssy": 285, "zijo": 286, "zÈ³hon": 287, "zÈ³hosy": 288, "Ã°Äeri": 289, "Ã±uha": 290, "ÄbrÅzi": 291, "Äeksia": 292, "Äeksion": 293, "Ä«los": 294, "Ä«lvyzÄ«r": 295, "Årbari": 296, "Å«ndanys": 297, "È³dra": 298};

    const FREQ_DATA = {"<BOS>": 666, "Änogar": 4, "ziry": 115, "aÅhaeot": 2, "se": 2764, "hÄ“drÈ³": 206, "jaelagon": 73, "issi": 462, ".": 1595, "henujagon": 819, "hen": 153, "pryjari": 81, ",": 938, "daenarÄ«": 25, "arlÅ«ni": 6, "ryndÄro": 28, "Äbrar": 12, "lÄ“kia": 7, "Ä«lÅnagon": 5, "iÄ": 3, "pÅnta": 57, "tolÄ«": 4, "ondor": 8, "glaesagon": 3, "jemÄ“le": 182, "iderÄ“bza": 91, "issa": 737, "belma": 25, "hÅ«nagon": 2, "jorrÄelagon": 178, "daor": 3, "<EOS>": 666, "qilÅni": 54, "ossÄ“nagon": 10, "tolvÄ«": 3, "dÅre": 24, "gÅ«rÄ“bzi": 9, "hae": 4, "onogÄr": 3, "glÄ“drÄ«": 29, "glÈ³rzi": 3, "rijÄ": 3, "zÅ«gagon": 40, "glaes": 72, "tepagon": 21, "zaldrÄ«zi": 17, "pÄr": 4, "sÄ«r": 18, "dÄrÄ«": 9, "vÄ“jose": 75, "rÅ«jagon": 11, "È³dragon": 8, "morghot": 13, "kesan": 4, "drÄ“jagon": 38, "Ä“lÄ«": 237, "Äeksi": 4, "kirimvose": 71, "mellyni": 1, "pyghor": 12, "valyria": 8, "mirre": 2, "valyrÄ«ha": 1, "zaldrÄ«zir": 140, "Äeksia": 1, "jinÄ“bagon": 1, "essos": 1, "mÄ“re": 16, "dÄria": 9, "jÅfari": 6, "skoros": 297, "?": 42, "toli": 2, "jÄ“dar": 13, "morghÅ«ljagon": 14, "Äegon": 9, "Äeksio": 40, "Ä“za": 4, "targaryen": 31, "aÅt": 3, "teptas": 2, "eldoria": 1, "hero": 1, "morghÅ«lagon": 1, "alaric": 4, "qogror": 7, "Ã¦lÄ«rys": 21, "pryvella": 21, "Ã¦eksio": 3, "avytilzÈ³n": 1, "jÅragor": 2, "Äeksion": 1, "mÄ“rÄ«": 17, "daenerys": 6, "Ã±uho": 3, "ghiscÄ«": 1, "Ã°Äeri": 1, "glaeson": 9, "tÄ«kila": 7, "aÅhaerys": 4, "zÈ³haan": 2, "rijÄ«bi": 1, "jorrÄelis": 78, "gadÄ«lÄ«": 1, "avy": 43, "kepa": 1, "gaomagon": 210, "kessa": 5, "ajomÄri": 1, "jikÄs": 6, "onos": 2, "hÅ«bÄ“nti": 1, "hÅ«bÄ“ntas": 1, "zaldrÄ«zoti": 878, "zaldrÄ«zotas": 3, "Ådrikagon": 554, "rÅ«sa": 1, "gaomis": 72, "Ã±uhe": 2, "skoriot": 75, "drÄ“joti": 71, "drÄ“jotas": 141, "kostas": 10, "Å«ndanissis": 212, "kostilus": 120, "dÄervon": 95, "dÄervosas": 141, "dÄerves": 1, "dÄeri": 89, "dÄeris": 69, "dÄeriot": 68, "È³dra": 1, "jiÅrina": 1, "vaoreznon": 1, "pÅntalo": 46, "jÄhon": 6, "jelmÅt": 1, "vestretÄs": 2, "dÄrys": 267, "targÄrio": 1, "lentrot": 1, "kesÄ«ri": 5, "perzys": 269, "onosor": 5, "mÄzis": 6, "ÄbrÅzi": 1, "Ä«lva": 34, "vali": 5, "jÄ“drivÄ«bilÄtÄs": 11, "aerys": 1, "kesor": 3, "hÄ“nkus": 19, "jÅ«nÄs": 1, "syt": 186, "zyhys": 3, "Ä“rinis": 4, "rhaella": 3, "aÅhikagon": 1, "morghÅ«lis": 2, "jÄ“dÄs": 44, "zÈ³hon": 1, "kastÄs": 2, "aegon": 3, "kesÄ«rÄ«": 1, "mÄzÄ«lÄtÄs": 3, "jÄhor": 1, "gÄ“lÄ«": 3, "lÄ«rÄ«": 1, "Ä“lÄ«rÄ«": 4, "henogon": 1, "gadis": 2, "kelÄ«tÄ«s": 1, "ao": 1, "Ã±uha": 1, "emagon": 1, "jaelar": 174, "ivestragÄ«": 78, "jagon": 75, "hÄ“nkirÄ«": 150, "iderÄ“bzi": 7, "vestris": 1, "belmurtÄ«": 2, "jevi": 4, "valzÄr": 1, "daorys": 1, "idaÃ±e": 1, "jemo": 1173, "gÅvilirose": 1, "ynoma": 2, "kivaroti": 1, "dÅron": 3, "Äerys": 3, "hÄedar": 1, "kostÅha": 4, "belmon": 148, "hÅ«lon": 153, "rÅ«sÄ«": 4, "sytilus": 90, "zaldrÄ«": 1, "gadÄ«li": 1, "rijÄ“la": 2, "iksan": 1, "rÅ«zÄ«non": 2, "drÄ“jÄ«n": 1, "Årbari": 1, "belmÄzma": 1, "brÅza": 1, "vÄ“zos": 68, "jÄ“dagon": 53, "Ä«los": 1, "nykeles": 2, "kostos": 83, "ÅÃ±o": 34, "mazÄ«lzi": 1, "sorzi": 2, "arlÄ«": 3, "kesÄ«r": 5, "tepan": 1, "jaela": 21, "hÄ“nkirzÄ«r": 6, "sÄ«rivalis": 8, "ivestragon": 3, "sÄ“nagon": 1, "belmagon": 1, "rijÄnagon": 1, "jevorion": 12, "pÅjÄzÄ«r": 1, "ondorion": 1, "zentyssis": 1, "muÃ±agon": 5, "zaldrÄ«zÄ«r": 6, "Ä«lvyzÄ«r": 1, "jevilÄtÄs": 10, "azantys": 5, "ivestrÄ«": 1, "iderÄ“bÄzma": 1, "rÅ«dholÄ«": 1, "gÅ«rÄ“nna": 1, "azantyr": 1, "tolvÄ«r": 1, "zentyssyssy": 1, "andahli": 3, "jÄkÄ“lot": 1, "jÄ“da": 1, "sÄ«rys": 1, "jorÅ«dan": 2, "muÃ±o": 1, "aeksio": 1, "Ä“ngos": 3, "jaelon": 98, "Ã±uhares": 5, "bÄ“lÄ«bza": 1, "symbe": 14, "brÅzma": 10, "ivestrilÄtÄs": 1, "dÄeragon": 2, "kostigon": 2, "hÄ“nta": 30, "iderenna": 3, "jÄ“nagon": 6, "daoruni": 4, "kesy": 3, "syrzir": 4, "zijo": 1, "dÄeruni": 4, "kirimvi": 10, "belmurti": 8, "belmurtÄs": 2, "Å«ndanys": 1, "nykÄ“lo": 1, "dÄrilaros": 6, "jeme": 1, "jorÅ«n": 2, "kostagon": 1, "jaelza": 9, "luaan": 1, "sagon": 2, "jemÄ“bza": 9, "jorun": 2, "jiorvÄr": 2, "ÅÃ±osor": 3, "dÄerys": 3, "dÄerÄ“bzi": 6, "jaelzar": 7, "muÃ±a": 12, "gÅ«rÄ“Ã±agon": 1, "pryjÄtÄs": 1, "pÅntÄs": 1, "jevon": 3, "rÄ“bagon": 1, "zÈ³hosy": 1, "gÅ«rotriri": 1, "gÅ«rotrirÄ«": 11, "qilÅn": 2, "pÅjor": 1, "prÅ«mia": 1, "hÅ«ro": 1};

    const SPECIAL = new Set(["<PAD>", "<UNK>", "<BOS>", "<EOS>"]);
    const PUNCT = new Set([".", ",", "?", "!", ";", ":"]);

    function getType(token) {
      if (SPECIAL.has(token)) return 'special';
      if (PUNCT.has(token)) return 'punct';
      return 'word';
    }

    // Build token list with all metadata
    const tokens = Object.entries(VOCAB_DATA).map(([token, id]) => ({
      token, id,
      freq: FREQ_DATA[token] || 0,
      type: getType(token),
    }));

    const maxFreq = Math.max(...tokens.map(t => t.freq));
    const totalTokens = tokens.reduce((a, t) => a + t.freq, 0);

    // ============================================================
    // STATS
    // ============================================================
    const statsEl = document.getElementById('stats-grid');
    const stats = [
      { value: tokens.length, label: 'Vocab Size' },
      { value: totalTokens.toLocaleString(), label: 'Total Tokens' },
      { value: tokens.filter(t => t.type === 'word').length, label: 'Unique Words' },
      { value: tokens.filter(t => t.type === 'special').length, label: 'Special Tokens' },
    ];
    statsEl.innerHTML = stats.map(s => `
      <div class="stat-card">
        <div class="stat-value">${s.value}</div>
        <div class="stat-label">${s.label}</div>
      </div>
    `).join('');

    // ============================================================
    // BAR CHART â€” top 15 (excluding special tokens)
    // ============================================================
    const chartEl = document.getElementById('bar-chart');
    const top15 = [...tokens]
      .filter(t => t.type !== 'special')
      .sort((a, b) => b.freq - a.freq)
      .slice(0, 15);
    const chartMax = top15[0]?.freq || 1;

    chartEl.innerHTML = top15.map(t => `
      <div class="bar-row">
        <div class="bar-token">${escHtml(t.token)}</div>
        <div class="bar-track">
          <div class="bar-fill" style="width: ${(t.freq / chartMax * 100).toFixed(1)}%"></div>
        </div>
        <div class="bar-count">${t.freq.toLocaleString()}</div>
      </div>
    `).join('');

    // ============================================================
    // RENDER TOKEN GRID
    // ============================================================
    const gridEl = document.getElementById('token-grid');
    let currentFilter = 'all';
    let currentSort = 'freq';
    let searchQuery = '';

    function renderGrid() {
      let filtered = tokens.filter(t => {
        if (currentFilter !== 'all' && t.type !== currentFilter) return false;
        if (searchQuery && !t.token.toLowerCase().includes(searchQuery.toLowerCase())
            && !String(t.id).includes(searchQuery)) return false;
        return true;
      });

      if (currentSort === 'freq') filtered.sort((a, b) => b.freq - a.freq || a.id - b.id);
      else if (currentSort === 'alpha') filtered.sort((a, b) => a.token.localeCompare(b.token));
      else if (currentSort === 'id') filtered.sort((a, b) => a.id - b.id);

      if (filtered.length === 0) {
        gridEl.innerHTML = '<div class="no-results">No tokens found ğŸ˜•</div>';
        return;
      }

      gridEl.innerHTML = filtered.map((t, i) => `
        <div class="token-card type-${t.type}" onclick="showModal('${escAttr(t.token)}')"
             style="animation-delay: ${Math.min(i * 15, 500)}ms">
          <div class="token-text">${escHtml(t.token)}</div>
          <div class="token-meta">
            <span class="token-id">ID ${t.id}</span>
            <span class="token-freq">${t.freq.toLocaleString()}Ã—</span>
          </div>
          <div class="freq-bar-container">
            <div class="freq-bar" style="width: ${(t.freq / maxFreq * 100).toFixed(1)}%"></div>
          </div>
        </div>
      `).join('');
    }

    renderGrid();

    // ============================================================
    // INTERACTIONS
    // ============================================================
    // Search
    document.getElementById('search').addEventListener('input', e => {
      searchQuery = e.target.value;
      renderGrid();
    });

    // Filter buttons
    document.querySelectorAll('[data-filter]').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('[data-filter]').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentFilter = btn.dataset.filter;
        renderGrid();
      });
    });

    // Sort buttons
    document.querySelectorAll('[data-sort]').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('[data-sort]').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentSort = btn.dataset.sort;
        renderGrid();
      });
    });

    // Modal
    const modalOverlay = document.getElementById('modal-overlay');
    const modalEl = document.getElementById('modal');

    function showModal(tokenStr) {
      const t = tokens.find(x => x.token === tokenStr);
      if (!t) return;
      const pct = (t.freq / totalTokens * 100).toFixed(2);
      const rank = [...tokens].sort((a, b) => b.freq - a.freq).findIndex(x => x.token === t.token) + 1;

      modalEl.innerHTML = `
        <div class="modal-token" style="color: ${{special:'var(--special)',punct:'var(--punct)',word:'var(--accent3)'}[t.type]}">${escHtml(t.token)}</div>
        <div style="color:var(--text-dim);font-size:0.85rem;margin-bottom:0.5rem">${t.type.toUpperCase()} TOKEN</div>
        <div class="modal-details">
          <div class="detail-item">
            <div class="detail-value">${t.id}</div>
            <div class="detail-label">Token ID</div>
          </div>
          <div class="detail-item">
            <div class="detail-value">${t.freq.toLocaleString()}</div>
            <div class="detail-label">Frequency</div>
          </div>
          <div class="detail-item">
            <div class="detail-value">#${rank}</div>
            <div class="detail-label">Rank</div>
          </div>
          <div class="detail-item">
            <div class="detail-value">${pct}%</div>
            <div class="detail-label">Coverage</div>
          </div>
        </div>
        <button class="close-btn" onclick="closeModal()">Close</button>
      `;
      modalOverlay.classList.add('active');
    }

    function closeModal() { modalOverlay.classList.remove('active'); }
    modalOverlay.addEventListener('click', e => { if (e.target === modalOverlay) closeModal(); });
    document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

    // Helpers
    function escHtml(s) { const d = document.createElement('div'); d.textContent = s; return d.innerHTML; }
    function escAttr(s) { return s.replace(/'/g, "\\'").replace(/"/g, '&quot;'); }
  </script>
</body>
</html>
